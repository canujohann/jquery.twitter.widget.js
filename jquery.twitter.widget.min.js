/**
 * jQuery Twitter Widget v1.0.5
 * http://flugel.biz/
 *
 * Licensed under the MIT license.
 * Copyright 2012 Yutaka Imagawa
 */
var twitterWidget={timer:false,option:{},items:[],user:{},init:function(e){var t={speed:10,count:100,exclude_replies:false,include_rts:true,reverse:false};this.option=$.extend(t,e);var n=this.option.path+"twitter.php";n+="?screen_name="+this.option.screen_name;n+="&count="+this.option.count;if(this.option.exclude_replies)n+="&exclude_replies=true";if(!this.option.include_rts)n+="&include_rts=false";this.triggers();this.retrieve(n)},triggers:function(){$(".tw_action").live("click",function(e){window.open($(this).attr("href"),"tw_window","width=550, height=520, menubar=no, toolbar=no, scrollbars=yes");e.preventDefault()})},retrieve:function(e){$.getJSON(e,function(e){twitterWidget.set(e)})},set:function(e){this.items=[];if(this.option.reverse){for(var t=e.length-1;t>=0;t--){this.setData(e,t)}}else{for(var t=0;t<e.length;t++){this.setData(e,t)}}this.user={description:this.link.enable(e[0].user.description,e[0].user.entities.description),favourites:e[0].user.favourites_count,followers:e[0].user.followers_count,followings:e[0].user.friends_count,follow_request_sent:e[0].user.follow_request_sent,following:e[0].user.following,location:e[0].user.location,"protected":e[0].user.protected,screen_name:e[0].user.screen_name,name:e[0].user.name,url:e[0].user.url};if(this.option.src.header)twitterWidget.create.init(twitterWidget.items[0],"header");if(this.option.src.footer)twitterWidget.create.init(twitterWidget.items[0],"footer");twitterWidget.create.init(twitterWidget.items[0],"body");this.timer=setInterval(function(){if(twitterWidget.items.length==0){clearInterval(twitterWidget.timer);return false}twitterWidget.create.init(twitterWidget.items[0],"body")},this.option.speed*1e3)},setData:function(e,t){var n=e[t].created_at.split(" ");var r=new Date(n[1]+" "+n[2]+", "+n[5]+" "+n[3]);var r=new Date(r.getTime()+9*60*60*1e3);var i=this.option.dateformat;this.items[this.items.length]={created_at:this.option.dateformat?i.replace("Y",r.getFullYear()).replace("M",this.fixFormat(r.getMonth()+1)).replace("D",this.fixFormat(r.getDate())).replace("h",this.fixFormat(r.getHours())).replace("m",this.fixFormat(r.getMinutes())).replace("s",this.fixFormat(r.getSeconds())):e[t].created_at,id:e[t].id,id_str:e[t].id_str,text:this.link.enable(e[t].text,e[t].entities),screen_name:e[t].user.screen_name,name:e[t].user.name,profile_image_url:e[t].user.profile_image_url}},link:{enable:function(e,t){var n=[];for(var r in t){for(var i=0;i<t[r].length;i++){n[n.length]={type:t[r][i].text?"hash":t[r][i].url?"url":"mention",text:t[r][i].text?t[r][i].text:t[r][i].url?t[r][i].url:t[r][i].screen_name,from:t[r][i].indices[0],to:t[r][i].indices[1]}}}n.sort(function(e,t){return e["from"]>t["from"]?1:-1});for(var r=n.length-1;r>=0;r--){e=e.substr(0,n[r].from)+this.cut[n[r].type](n[r])+e.substr(n[r].to)}return e},cut:{hash:function(e){return"<a href='https://twitter.com/search?q=%23"+e.text+"' target='_blank' title='"+e.text+"'>#"+e.text+"</a>"},url:function(e){return"<a href='"+e.text+"' target='_blank' title='"+e.text+"'>"+e.text+"</a>"},mention:function(e){return"<a href='https://twitter.com/"+e.text+"' target='_blank' title='"+e.text+"'>@"+e.text+"</a>"}}},fixFormat:function(e){return e<10?"0"+e:e},create:{data:false,init:function(e,t){var n=twitterWidget.option.src[t],r,i;this.data=e;i=n.lastIndexOf("$");while(i!=-1){r=n.lastIndexOf("$",i-1);var s=n.substr(r+1,i-(r+1));i++;n=n.substr(0,r)+this[s]()+n.substr(i);i=n.lastIndexOf("$",r-1)}if(t!="body"){$("#tw_"+t).append(n)}else{$("#tw_body").children()[0]?$($("#tw_body").children()[0]).before(n):$("#tw_body").append(n);$($("#tw_body").children()[0]).hide().slideDown(1e3);twitterWidget.items.splice(0,1)}},created_at:function(){return"<a href='https://twitter.com/"+twitterWidget.user.name+"/status/"+this.data.id_str+"' target='_blank' title='"+this.data.created_at+"'>"+this.data.created_at+"</a>"},text:function(){return this.data.text},icon:function(){return"<a href='https://twitter.com/"+twitterWidget.user.screen_name+"' target='_blank' title='"+twitterWidget.user.screen_name+"'><img src='"+this.data.profile_image_url+"' alt='"+this.data.screen_name+"' title='"+twitterWidget.user.screen_name+"' /></a>"},screen_name:function(){return"<a href='https://twitter.com/"+twitterWidget.user.screen_name+"' target='_blank' title='"+twitterWidget.user.screen_name+"'>"+twitterWidget.user.screen_name+"</a>"},name:function(){return"<a href='https://twitter.com/"+twitterWidget.user.screen_name+"' target='_blank' title='"+twitterWidget.user.name+"'>"+twitterWidget.user.name+"</a>"},description:function(){return twitterWidget.user.description+(twitterWidget.user.url?" <a href='"+twitterWidget.user.url+"' target='_blank' title='"+twitterWidget.user.url+"'>"+twitterWidget.user.url+"</a>":"")},logo:function(){return"<a href='https://twitter.com/' target='_blank' title='Twitter'><img src='https://si0.twimg.com/a/1354664716/images/resources/twitter-bird-callout.png' alt='Twitter' title='Twitter' /></a>"},reply:function(){var e=twitterWidget.option.src.reply?twitterWidget.option.src.reply:"Reply";return"<a href='https://twitter.com/intent/tweet?in_reply_to="+this.data.id_str+"' class='tw_action' target='_blank' title='Reply'>"+e+"</a>"},retweet:function(){var e=twitterWidget.option.src.retweet?twitterWidget.option.src.retweet:"Retweet";return twitterWidget.user.protected?"":"<a href='https://twitter.com/intent/retweet?tweet_id="+this.data.id_str+"' class='tw_action' target='_blank' title='Retweet'>"+e+"</a>"},favorite:function(){var e=twitterWidget.option.src.favorite?twitterWidget.option.src.favorite:"Favorite";return"<a href='https://twitter.com/intent/favorite?tweet_id="+this.data.id_str+"' class='tw_action' target='_blank' title='Favorite'>"+e+"</a>"},action:function(){return this.reply()+this.retweet()+this.favorite()}}};$.fn.extend({twitterWidget:function(e){if(e.src.header)$(this).append("<div id='tw_header'></div>");$(this).append("<div id='tw_body'></div>");if(e.src.footer)$(this).append("<div id='tw_footer'></div>");twitterWidget.init(e);return this}})